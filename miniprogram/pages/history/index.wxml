<view class="container">
  <view class="page-header">
    <view class="page-title">å­¦ä¹ å†å²</view>
  </view>

  <view class="filter-container">
    <view class="filter-tabs">
      <view class="tab-item {{currentType === 'all' ? 'active' : ''}}" bindtap="switchType" data-type="all">å…¨éƒ¨</view>
      <view class="tab-item {{currentType === 'material' ? 'active' : ''}}" bindtap="switchType" data-type="material">è¾…å¯¼èµ„æ–™</view>
      <view class="tab-item {{currentType === 'test' ? 'active' : ''}}" bindtap="switchType" data-type="test">å­¦ä¸šè¯Šæ–­</view>
      <view class="tab-item {{currentType === 'knowledge' ? 'active' : ''}}" bindtap="switchType" data-type="knowledge">çŸ¥è¯†ç‚¹å¯¹æ ‡</view>
    </view>
  </view>

  <view class="history-list" wx:if="{{historyList.length > 0}}">
    <view class="history-item" wx:for="{{historyList}}" wx:key="id" bindtap="viewDetail" data-item="{{item}}">
      <view class="history-icon">
        <text wx:if="{{item.type === 'material'}}">ğŸ“„</text>
        <text wx:elif="{{item.type === 'test'}}">ğŸ“</text>
        <text wx:else>ğŸ“š</text>
      </view>
      <view class="history-content">
        <view class="history-title">{{item.title}}</view>
        <view class="history-info">
          <text class="history-type">{{item.typeName}}</text>
          <text class="history-time">{{item.time}}</text>
        </view>
        <view class="test-detail" wx:if="{{item.type === 'test'}}">
          <view class="test-info-row">
            <text class="test-label">å¹´çº§ï¼š</text>
            <text class="test-value">{{item.grade}}</text>
          </view>
          <view class="test-info-row">
            <text class="test-label">ç§‘ç›®ï¼š</text>
            <text class="test-value">{{item.subject}}</text>
          </view>
          <view class="test-info-row">
            <text class="test-label">å¾—åˆ†ï¼š</text>
            <text class="test-value score">{{item.score}}åˆ†</text>
          </view>
          <view class="test-info-row">
            <text class="test-label">æŒæ¡ç‡ï¼š</text>
            <text class="test-value">{{item.masteryRate}}%</text>
          </view>
        </view>
      </view>
      <view class="history-arrow">></view>
    </view>
  </view>

  <view class="empty-state" wx:else>
    <text class="empty-icon">ğŸ“</text>
    <view class="empty-text">æš‚æ— å­¦ä¹ è®°å½•</view>
    <view class="empty-tip">å¼€å§‹å­¦ä¹ åï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºæ‚¨çš„å­¦ä¹ å†å²</view>
  </view>

  <view class="clear-btn" wx:if="{{historyList.length > 0}}" bindtap="clearHistory">
    æ¸…ç©ºå†å²è®°å½•
  </view>
</view>
