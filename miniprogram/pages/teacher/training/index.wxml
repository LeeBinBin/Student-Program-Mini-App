<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="top-nav">
    <view class="nav-back" bindtap="navigateBack">
      <text class="back-icon">â†</text>
    </view>
    <view class="nav-title">æ•™å¸ˆåŸ¹è®­</view>
    <view class="nav-actions">
      <view class="action-item" bindtap="myCourses">
        <text class="action-icon">ğŸ“š</text>
      </view>
    </view>
  </view>

  <!-- æœç´¢å’Œç­›é€‰ -->
  <view class="search-filter">
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input class="search-input" placeholder="æœç´¢åŸ¹è®­è¯¾ç¨‹ã€å…³é”®è¯æˆ–è®²å¸ˆ" bindinput="onSearch" value="{{searchKeyword}}" />
    </view>
    <view class="filter-section">
      <view class="filter-item" bindtap="showFilter('category')">
        <text>{{selectedCategory || 'åˆ†ç±»'}}</text>
        <text class="filter-arrow">â–¼</text>
      </view>
      <view class="filter-item" bindtap="showFilter('level')">
        <text>{{selectedLevel || 'çº§åˆ«'}}</text>
        <text class="filter-arrow">â–¼</text>
      </view>
    </view>
  </view>

  <!-- åŸ¹è®­è¯¾ç¨‹åˆ—è¡¨ -->
  <view class="courses-list">
    <view wx:for="{{courses}}" wx:key="id" class="course-item">
      <view class="course-thumbnail">
        <image src="{{item.thumbnail}}" mode="aspectFill"></image>
        <view class="course-tag" style="background-color: {{item.tagColor}}">{{item.tag}}</view>
      </view>
      <view class="course-content">
        <view class="course-header">
          <view class="course-title">{{item.title}}</view>
          <view class="course-rating">
            <text class="rating-icon">â­</text>
            <text class="rating-text">{{item.rating}}</text>
          </view>
        </view>
        <view class="course-description">{{item.description}}</view>
        <view class="course-meta">
          <view class="meta-item">
            <text class="meta-icon">ğŸ‘¨â€ğŸ«</text>
            <text class="meta-text">{{item.instructor}}</text>
          </view>
          <view class="meta-item">
            <text class="meta-icon">â±ï¸</text>
            <text class="meta-text">{{item.duration}}</text>
          </view>
          <view class="meta-item">
            <text class="meta-icon">ğŸ‘¥</text>
            <text class="meta-text">{{item.students}}äººå­¦ä¹ </text>
          </view>
        </view>
        <view class="course-tags">
          <view class="tag" style="background-color: #E0F2FE">{{item.category}}</view>
          <view class="tag" style="background-color: #D9F99D">{{item.level}}</view>
          <view class="tag" wx:if="{{item.crossBorder}}" style="background-color: #FEF3C7">è·¨å¢ƒæ•™è‚²</view>
        </view>
        <view class="course-actions">
          <view class="action-btn primary-btn" bindtap="enrollCourse" data-id="{{item.id}}">
            <text class="action-text">{{item.enrolled ? 'ç»§ç»­å­¦ä¹ ' : 'ç«‹å³æŠ¥å'}}</text>
          </view>
          <view class="action-btn secondary-btn" bindtap="previewCourse" data-id="{{item.id}}">
            <text class="action-text">é¢„è§ˆ</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æ— æ•°æ®æç¤º -->
  <view wx:if="{{courses.length === 0}}" class="empty-state">
    <text class="empty-icon">ğŸ“</text>
    <view class="empty-text">æš‚æ— åŸ¹è®­è¯¾ç¨‹</view>
    <view class="empty-desc">è¯·ç¨åå†æ¥æŸ¥çœ‹</view>
  </view>

  <!-- ç­›é€‰å¼¹çª— -->
  <view wx:if="{{showFilterModal}}" class="modal" catchtap="hideFilter">
    <view class="modal-content" catchtap="catchTap">
      <view class="modal-header">
        <view class="modal-title">{{filterTitle}}</view>
        <view class="modal-close" bindtap="hideFilter">Ã—</view>
      </view>
      <view class="modal-body">
        <view wx:for="{{filterOptions}}" wx:key="index" class="filter-option" bindtap="selectFilter" data-value="{{item.value}}" data-label="{{item.label}}">
          <text class="option-text">{{item.label}}</text>
          <text wx:if="{{item.value === selectedFilterValue}}" class="option-check">âœ“</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æˆ‘çš„è¯¾ç¨‹å¼¹çª— -->
  <view wx:if="{{showMyCoursesModal}}" class="modal" catchtap="hideMyCoursesModal">
    <view class="modal-content my-courses-modal" catchtap="catchTap">
      <view class="modal-header">
        <view class="modal-title">æˆ‘çš„è¯¾ç¨‹</view>
        <view class="modal-close" bindtap="hideMyCoursesModal">Ã—</view>
      </view>
      <view class="modal-body">
        <view wx:if="{{myCourses.length > 0}}" class="my-courses-list">
          <view wx:for="{{myCourses}}" wx:key="id" class="my-course-item">
            <view class="my-course-info">
              <view class="my-course-title">{{item.title}}</view>
              <view class="my-course-progress">
                <view class="progress-bar">
                  <view class="progress-fill" style="width: {{item.progress}}%"></view>
                </view>
                <view class="progress-text">{{item.progress}}%</view>
              </view>
            </view>
            <view class="my-course-action" bindtap="continueCourse" data-id="{{item.id}}">
              <text class="action-text">ç»§ç»­å­¦ä¹ </text>
            </view>
          </view>
        </view>
        <view wx:else class="empty-courses">
          <text class="empty-icon">ğŸ“š</text>
          <view class="empty-text">æš‚æ— å·²æŠ¥åè¯¾ç¨‹</view>
          <view class="empty-desc">å¿«å»æŠ¥åæ„Ÿå…´è¶£çš„åŸ¹è®­è¯¾ç¨‹å§</view>
        </view>
      </view>
    </view>
  </view>
</view>