<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="top-nav">
    <view class="nav-back" bindtap="navigateBack">
      <text class="back-icon">â†</text>
    </view>
    <view class="nav-title">å­¦åˆ†äº’è®¤ä¸è¯„ä»·ä½“ç³»</view>
    <view class="nav-actions">
      <view class="action-item" bindtap="addRecognition">
        <text class="action-icon">+</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½æ ‡ç­¾é¡µ -->
  <view class="tab-bar">
    <view class="tab-item {{activeTab === 'credit' ? 'active' : ''}}" bindtap="switchTab('credit')">
      <view class="tab-text">å­¦åˆ†äº’è®¤</view>
      <view class="tab-indicator {{activeTab === 'credit' ? 'show' : ''}}"></view>
    </view>
    <view class="tab-item {{activeTab === 'evaluation' ? 'active' : ''}}" bindtap="switchTab('evaluation')">
      <view class="tab-text">è¯„ä»·ä½“ç³»</view>
      <view class="tab-indicator {{activeTab === 'evaluation' ? 'show' : ''}}"></view>
    </view>
  </view>

  <!-- å­¦åˆ†äº’è®¤å†…å®¹ -->
  <view wx:if="{{activeTab === 'credit'}}" class="credit-content">
    <!-- æœç´¢å’Œç­›é€‰ -->
    <view class="search-filter">
      <view class="search-box">
        <text class="search-icon">ğŸ”</text>
        <input class="search-input" placeholder="æœç´¢è¯¾ç¨‹åç§°ã€å…³é”®è¯" bindinput="onCreditSearch" value="{{creditSearchKeyword}}" />
      </view>
      <view class="filter-section">
        <view class="filter-item" bindtap="showCreditFilter('subject')">
          <text>{{selectedCreditSubject || 'å­¦ç§‘'}}</text>
          <text class="filter-arrow">â–¼</text>
        </view>
        <view class="filter-item" bindtap="showCreditFilter('level')">
          <text>{{selectedCreditLevel || 'çº§åˆ«'}}</text>
          <text class="filter-arrow">â–¼</text>
        </view>
      </view>
    </view>

    <!-- å­¦åˆ†äº’è®¤åˆ—è¡¨ -->
    <view class="credit-list">
      <view wx:for="{{creditCourses}}" wx:key="id" class="credit-item">
        <view class="credit-header">
          <view class="course-info">
            <view class="course-title">{{item.courseName}}</view>
            <view class="course-details">
              <text class="detail-item">{{item.subject}}</text>
              <text class="detail-divider">|</text>
              <text class="detail-item">{{item.level}}</text>
            </view>
          </view>
          <view class="credit-status" style="background-color: {{item.statusColor}}">{{item.status}}</view>
        </view>
        <view class="credit-body">
          <view class="credit-comparison">
            <view class="credit-side">
              <view class="side-label">å¹¿ä¸œå­¦åˆ†</view>
              <view class="side-value">{{item.guangdongCredit}}å­¦åˆ†</view>
            </view>
            <view class="credit-arrow">â†’</view>
            <view class="credit-side">
              <view class="side-label">é¦™æ¸¯å­¦åˆ†</view>
              <view class="side-value">{{item.hongkongCredit}}å­¦åˆ†</view>
            </view>
          </view>
          <view class="credit-description">{{item.description}}</view>
        </view>
        <view class="credit-actions">
          <view class="action-btn primary-btn" bindtap="viewCreditDetail" data-id="{{item.id}}">
            <text class="action-text">æŸ¥çœ‹è¯¦æƒ…</text>
          </view>
          <view class="action-btn secondary-btn" bindtap="editCredit" data-id="{{item.id}}">
            <text class="action-text">ç¼–è¾‘</text>
          </view>
        </view>
      </view>
    </view>

    <!-- æ— æ•°æ®æç¤º -->
    <view wx:if="{{creditCourses.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ“</text>
      <view class="empty-text">æš‚æ— å­¦åˆ†äº’è®¤æ•°æ®</view>
      <view class="empty-desc">ç‚¹å‡»å³ä¸Šè§’æ·»åŠ å­¦åˆ†äº’è®¤è®°å½•</view>
    </view>
  </view>

  <!-- è¯„ä»·ä½“ç³»å†…å®¹ -->
  <view wx:if="{{activeTab === 'evaluation'}}" class="evaluation-content">
    <!-- æœç´¢å’Œç­›é€‰ -->
    <view class="search-filter">
      <view class="search-box">
        <text class="search-icon">ğŸ”</text>
        <input class="search-input" placeholder="æœç´¢è¯„ä»·æ ‡å‡†ã€å…³é”®è¯" bindinput="onEvaluationSearch" value="{{evaluationSearchKeyword}}" />
      </view>
      <view class="filter-section">
        <view class="filter-item" bindtap="showEvaluationFilter('subject')">
          <text>{{selectedEvaluationSubject || 'å­¦ç§‘'}}</text>
          <text class="filter-arrow">â–¼</text>
        </view>
        <view class="filter-item" bindtap="showEvaluationFilter('type')">
          <text>{{selectedEvaluationType || 'ç±»å‹'}}</text>
          <text class="filter-arrow">â–¼</text>
        </view>
      </view>
    </view>

    <!-- è¯„ä»·ä½“ç³»åˆ—è¡¨ -->
    <view class="evaluation-list">
      <view wx:for="{{evaluationStandards}}" wx:key="id" class="evaluation-item">
        <view class="evaluation-header">
          <view class="standard-info">
            <view class="standard-title">{{item.title}}</view>
            <view class="standard-details">
              <text class="detail-item">{{item.subject}}</text>
              <text class="detail-divider">|</text>
              <text class="detail-item">{{item.type}}</text>
            </view>
          </view>
        </view>
        <view class="evaluation-body">
          <view class="standard-comparison">
            <view class="standard-side">
              <view class="side-label">å¹¿ä¸œè¯„ä»·æ ‡å‡†</view>
              <view class="side-content">{{item.guangdongStandard}}</view>
            </view>
            <view class="standard-divider"></view>
            <view class="standard-side">
              <view class="side-label">é¦™æ¸¯è¯„ä»·æ ‡å‡†</view>
              <view class="side-content">{{item.hongkongStandard}}</view>
            </view>
          </view>
          <view class="standard-mapping">
            <view class="mapping-title">å¯¹åº”å…³ç³»</view>
            <view class="mapping-content">{{item.mappingRelation}}</view>
          </view>
        </view>
        <view class="evaluation-actions">
          <view class="action-btn primary-btn" bindtap="viewEvaluationDetail" data-id="{{item.id}}">
            <text class="action-text">æŸ¥çœ‹è¯¦æƒ…</text>
          </view>
          <view class="action-btn secondary-btn" bindtap="editEvaluation" data-id="{{item.id}}">
            <text class="action-text">ç¼–è¾‘</text>
          </view>
        </view>
      </view>
    </view>

    <!-- æ— æ•°æ®æç¤º -->
    <view wx:if="{{evaluationStandards.length === 0}}" class="empty-state">
      <text class="empty-icon">ğŸ“Š</text>
      <view class="empty-text">æš‚æ— è¯„ä»·ä½“ç³»æ•°æ®</view>
      <view class="empty-desc">ç‚¹å‡»å³ä¸Šè§’æ·»åŠ è¯„ä»·æ ‡å‡†å¯¹åº”å…³ç³»</view>
    </view>
  </view>

  <!-- ç­›é€‰å¼¹çª— -->
  <view wx:if="{{showFilterModal}}" class="modal" catchtap="hideFilterModal">
    <view class="modal-content" catchtap="catchTap">
      <view class="modal-header">
        <view class="modal-title">{{filterTitle}}</view>
        <view class="modal-close" bindtap="hideFilterModal">Ã—</view>
      </view>
      <view class="modal-body">
        <view wx:for="{{filterOptions}}" wx:key="index" class="filter-option" bindtap="selectFilterOption" data-value="{{item.value}}" data-label="{{item.label}}" data-type="{{filterType}}">
          <text class="option-text">{{item.label}}</text>
          <text wx:if="{{item.value === selectedFilterValue}}" class="option-check">âœ“</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ·»åŠ å­¦åˆ†äº’è®¤å¼¹çª— -->
  <view wx:if="{{showAddModal}}" class="modal" catchtap="hideAddModal">
    <view class="modal-content add-modal" catchtap="catchTap">
      <view class="modal-header">
        <view class="modal-title">{{addModalType === 'credit' ? 'æ·»åŠ å­¦åˆ†äº’è®¤' : 'æ·»åŠ è¯„ä»·æ ‡å‡†'}}</view>
        <view class="modal-close" bindtap="hideAddModal">Ã—</view>
      </view>
      <view class="modal-body">
        <!-- å­¦åˆ†äº’è®¤è¡¨å• -->
        <view wx:if="{{addModalType === 'credit'}}" class="form-content">
          <view class="form-item">
            <view class="form-label">è¯¾ç¨‹åç§°</view>
            <input class="form-input" placeholder="è¯·è¾“å…¥è¯¾ç¨‹åç§°" value="{{addForm.courseName}}" bindinput="onAddInput" data-field="courseName" />
          </view>
          <view class="form-item">
            <view class="form-label">å­¦ç§‘</view>
            <view class="form-select" bindtap="selectCreditSubject">
              <text>{{addForm.subject || 'è¯·é€‰æ‹©å­¦ç§‘'}}</text>
              <text class="select-arrow">â–¼</text>
            </view>
          </view>
          <view class="form-item">
            <view class="form-label">çº§åˆ«</view>
            <view class="form-select" bindtap="selectCreditLevel">
              <text>{{addForm.level || 'è¯·é€‰æ‹©çº§åˆ«'}}</text>
              <text class="select-arrow">â–¼</text>
            </view>
          </view>
          <view class="form-item">
            <view class="form-label">å¹¿ä¸œå­¦åˆ†</view>
            <input class="form-input" placeholder="è¯·è¾“å…¥å¹¿ä¸œå­¦åˆ†" value="{{addForm.guangdongCredit}}" bindinput="onAddInput" data-field="guangdongCredit" type="number" />
          </view>
          <view class="form-item">
            <view class="form-label">é¦™æ¸¯å­¦åˆ†</view>
            <input class="form-input" placeholder="è¯·è¾“å…¥é¦™æ¸¯å­¦åˆ†" value="{{addForm.hongkongCredit}}" bindinput="onAddInput" data-field="hongkongCredit" type="number" />
          </view>
          <view class="form-item">
            <view class="form-label">æè¿°</view>
            <textarea class="form-textarea" placeholder="è¯·è¾“å…¥å­¦åˆ†äº’è®¤æè¿°" value="{{addForm.description}}" bindinput="onAddInput" data-field="description"></textarea>
          </view>
        </view>

        <!-- è¯„ä»·æ ‡å‡†è¡¨å• -->
        <view wx:if="{{addModalType === 'evaluation'}}" class="form-content">
          <view class="form-item">
            <view class="form-label">æ ‡å‡†åç§°</view>
            <input class="form-input" placeholder="è¯·è¾“å…¥è¯„ä»·æ ‡å‡†åç§°" value="{{addForm.title}}" bindinput="onAddInput" data-field="title" />
          </view>
          <view class="form-item">
            <view class="form-label">å­¦ç§‘</view>
            <view class="form-select" bindtap="selectEvaluationSubject">
              <text>{{addForm.subject || 'è¯·é€‰æ‹©å­¦ç§‘'}}</text>
              <text class="select-arrow">â–¼</text>
            </view>
          </view>
          <view class="form-item">
            <view class="form-label">ç±»å‹</view>
            <view class="form-select" bindtap="selectEvaluationType">
              <text>{{addForm.type || 'è¯·é€‰æ‹©ç±»å‹'}}</text>
              <text class="select-arrow">â–¼</text>
            </view>
          </view>
          <view class="form-item">
            <view class="form-label">å¹¿ä¸œè¯„ä»·æ ‡å‡†</view>
            <textarea class="form-textarea" placeholder="è¯·è¾“å…¥å¹¿ä¸œè¯„ä»·æ ‡å‡†" value="{{addForm.guangdongStandard}}" bindinput="onAddInput" data-field="guangdongStandard"></textarea>
          </view>
          <view class="form-item">
            <view class="form-label">é¦™æ¸¯è¯„ä»·æ ‡å‡†</view>
            <textarea class="form-textarea" placeholder="è¯·è¾“å…¥é¦™æ¸¯è¯„ä»·æ ‡å‡†" value="{{addForm.hongkongStandard}}" bindinput="onAddInput" data-field="hongkongStandard"></textarea>
          </view>
          <view class="form-item">
            <view class="form-label">å¯¹åº”å…³ç³»</view>
            <textarea class="form-textarea" placeholder="è¯·è¾“å…¥å¯¹åº”å…³ç³»" value="{{addForm.mappingRelation}}" bindinput="onAddInput" data-field="mappingRelation"></textarea>
          </view>
        </view>

        <view class="form-actions">
          <view class="form-btn cancel-btn" bindtap="hideAddModal">å–æ¶ˆ</view>
          <view class="form-btn confirm-btn" bindtap="submitAddForm">{{addModalType === 'credit' ? 'æ·»åŠ å­¦åˆ†äº’è®¤' : 'æ·»åŠ è¯„ä»·æ ‡å‡†'}}</view>
        </view>
      </view>
    </view>
  </view>
</view>