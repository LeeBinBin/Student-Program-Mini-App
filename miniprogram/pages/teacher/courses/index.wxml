<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="top-nav">
    <view class="nav-back" bindtap="navigateBack">
      <text class="back-icon">â†</text>
    </view>
    <view class="nav-title">è¯¾ç¨‹ç®¡ç†</view>
    <view class="nav-actions">
      <view class="action-item" bindtap="addCourse">
        <text class="action-icon">+</text>
      </view>
    </view>
  </view>

  <!-- æœç´¢å’Œç­›é€‰ -->
  <view class="search-filter">
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input class="search-input" placeholder="æœç´¢è¯¾ç¨‹åç§°ã€å­¦ç§‘æˆ–å¹´çº§" bindinput="onSearch" value="{{searchKeyword}}" />
    </view>
    <view class="filter-section">
      <view class="filter-item" bindtap="showFilter">
        <text>{{selectedSubject || 'å­¦ç§‘'}}</text>
        <text class="filter-arrow">â–¼</text>
      </view>
      <view class="filter-item" bindtap="showGradeFilter">
        <text>{{selectedGrade || 'å¹´çº§'}}</text>
        <text class="filter-arrow">â–¼</text>
      </view>
      <view class="filter-item" bindtap="showTypeFilter">
        <text>{{selectedType || 'è¯¾ç¨‹ç±»å‹'}}</text>
        <text class="filter-arrow">â–¼</text>
      </view>
    </view>
  </view>

  <!-- è¯¾ç¨‹åˆ—è¡¨ -->
  <view class="courses-list">
    <view wx:for="{{courses}}" wx:key="id" class="course-item">
      <view class="course-header">
        <view class="course-info">
          <view class="course-name">{{item.name}}</view>
          <view class="course-details">
            <text class="detail-item">{{item.subject}}</text>
            <text class="detail-divider">|</text>
            <text class="detail-item">{{item.grade}}å¹´çº§</text>
            <text class="detail-divider">|</text>
            <text class="detail-item">{{item.type}}</text>
          </view>
        </view>
        <view class="course-status" style="background-color: {{item.status === 'active' ? '#D9F99D' : '#FEE2E2'}}">
          {{item.status === 'active' ? 'è¿›è¡Œä¸­' : 'å·²ç»“æŸ'}}
        </view>
      </view>
      <view class="course-content">
        <view class="course-description">{{item.description}}</view>
        <view class="course-meta">
          <view class="meta-item">
            <text class="meta-icon">ğŸ‘¥</text>
            <text class="meta-text">{{item.studentCount}}åå­¦ç”Ÿ</text>
          </view>
          <view class="meta-item">
            <text class="meta-icon">ğŸ“…</text>
            <text class="meta-text">{{item.startDate}} è‡³ {{item.endDate}}</text>
          </view>
        </view>
      </view>
      <view class="course-actions">
        <view class="action-btn primary-btn" bindtap="viewCourseDetail" data-id="{{item.id}}">
          <text class="action-text">æŸ¥çœ‹è¯¦æƒ…</text>
        </view>
        <view class="action-btn secondary-btn" bindtap="editCourse" data-id="{{item.id}}">
          <text class="action-text">ç¼–è¾‘</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ— æ•°æ®æç¤º -->
  <view wx:if="{{courses.length === 0}}" class="empty-state">
    <text class="empty-icon">ğŸ“š</text>
    <view class="empty-text">æš‚æ— è¯¾ç¨‹æ•°æ®</view>
    <view class="empty-desc">ç‚¹å‡»å³ä¸Šè§’æ·»åŠ è¯¾ç¨‹</view>
  </view>

  <!-- å­¦ç§‘ç­›é€‰å¼¹çª— -->
  <view wx:if="{{showSubjectFilter}}" class="modal" catchtap="hideSubjectFilter">
    <view class="modal-content" catchtap="catchTap">
      <view class="modal-header">
        <view class="modal-title">é€‰æ‹©å­¦ç§‘</view>
        <view class="modal-close" bindtap="hideSubjectFilter">Ã—</view>
      </view>
      <view class="modal-body">
        <view class="filter-option" bindtap="selectSubject" data-value="">
          <text class="option-text">å…¨éƒ¨</text>
          <text wx:if="{{!selectedSubject}}" class="option-check">âœ“</text>
        </view>
        <view class="filter-option" bindtap="selectSubject" data-value="æ•°å­¦">
          <text class="option-text">æ•°å­¦</text>
          <text wx:if="{{selectedSubject === 'æ•°å­¦'}}" class="option-check">âœ“</text>
        </view>
        <view class="filter-option" bindtap="selectSubject" data-value="è‹±è¯­">
          <text class="option-text">è‹±è¯­</text>
          <text wx:if="{{selectedSubject === 'è‹±è¯­'}}" class="option-check">âœ“</text>
        </view>
        <view class="filter-option" bindtap="selectSubject" data-value="è¯­æ–‡">
          <text class="option-text">è¯­æ–‡</text>
          <text wx:if="{{selectedSubject === 'è¯­æ–‡'}}" class="option-check">âœ“</text>
        </view>
        <view class="filter-option" bindtap="selectSubject" data-value="ç§‘å­¦">
          <text class="option-text">ç§‘å­¦</text>
          <text wx:if="{{selectedSubject === 'ç§‘å­¦'}}" class="option-check">âœ“</text>
        </view>
        <view class="filter-option" bindtap="selectSubject" data-value="å…¶ä»–">
          <text class="option-text">å…¶ä»–</text>
          <text wx:if="{{selectedSubject === 'å…¶ä»–'}}" class="option-check">âœ“</text>
        </view>
      </view>
    </view>
  </view>

  <!-- å¹´çº§ç­›é€‰å¼¹çª— -->
  <view wx:if="{{showGradeFilter}}" class="modal" catchtap="hideGradeFilter">
    <view class="modal-content" catchtap="catchTap">
      <view class="modal-header">
        <view class="modal-title">é€‰æ‹©å¹´çº§</view>
        <view class="modal-close" bindtap="hideGradeFilter">Ã—</view>
      </view>
      <view class="modal-body">
        <view class="filter-option" bindtap="selectGrade" data-value="">
          <text class="option-text">å…¨éƒ¨</text>
          <text wx:if="{{!selectedGrade}}" class="option-check">âœ“</text>
        </view>
        <view class="filter-option" bindtap="selectGrade" data-value="1">
          <text class="option-text">1å¹´çº§</text>
          <text wx:if="{{selectedGrade === '1'}}" class="option-check">âœ“</text>
        </view>
        <view class="filter-option" bindtap="selectGrade" data-value="2">
          <text class="option-text">2å¹´çº§</text>
          <text wx:if="{{selectedGrade === '2'}}" class="option-check">âœ“</text>
        </view>
        <view class="filter-option" bindtap="selectGrade" data-value="3">
          <text class="option-text">3å¹´çº§</text>
          <text wx:if="{{selectedGrade === '3'}}" class="option-check">âœ“</text>
        </view>
        <view class="filter-option" bindtap="selectGrade" data-value="4">
          <text class="option-text">4å¹´çº§</text>
          <text wx:if="{{selectedGrade === '4'}}" class="option-check">âœ“</text>
        </view>
        <view class="filter-option" bindtap="selectGrade" data-value="5">
          <text class="option-text">5å¹´çº§</text>
          <text wx:if="{{selectedGrade === '5'}}" class="option-check">âœ“</text>
        </view>
        <view class="filter-option" bindtap="selectGrade" data-value="6">
          <text class="option-text">6å¹´çº§</text>
          <text wx:if="{{selectedGrade === '6'}}" class="option-check">âœ“</text>
        </view>
      </view>
    </view>
  </view>

  <!-- è¯¾ç¨‹ç±»å‹ç­›é€‰å¼¹çª— -->
  <view wx:if="{{showTypeFilter}}" class="modal" catchtap="hideTypeFilter">
    <view class="modal-content" catchtap="catchTap">
      <view class="modal-header">
        <view class="modal-title">é€‰æ‹©è¯¾ç¨‹ç±»å‹</view>
        <view class="modal-close" bindtap="hideTypeFilter">Ã—</view>
      </view>
      <view class="modal-body">
        <view class="filter-option" bindtap="selectType" data-value="">
          <text class="option-text">å…¨éƒ¨</text>
          <text wx:if="{{!selectedType}}" class="option-check">âœ“</text>
        </view>
        <view class="filter-option" bindtap="selectType" data-value="å¸¸è§„è¯¾ç¨‹">
          <text class="option-text">å¸¸è§„è¯¾ç¨‹</text>
          <text wx:if="{{selectedType === 'å¸¸è§„è¯¾ç¨‹'}}" class="option-check">âœ“</text>
        </view>
        <view class="filter-option" bindtap="selectType" data-value="è·¨å¢ƒé€‚é…">
          <text class="option-text">è·¨å¢ƒé€‚é…</text>
          <text wx:if="{{selectedType === 'è·¨å¢ƒé€‚é…'}}" class="option-check">âœ“</text>
        </view>
        <view class="filter-option" bindtap="selectType" data-value="æ‹“å±•è¯¾ç¨‹">
          <text class="option-text">æ‹“å±•è¯¾ç¨‹</text>
          <text wx:if="{{selectedType === 'æ‹“å±•è¯¾ç¨‹'}}" class="option-check">âœ“</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç¼–è¾‘è¯¾ç¨‹æ¨¡æ€æ¡† -->
  <view wx:if="{{showEditModal}}" class="modal" catchtap="cancelEdit">
    <view class="modal-content edit-modal" catchtap="catchTap">
      <view class="modal-header">
        <view class="modal-title">ç¼–è¾‘è¯¾ç¨‹</view>
        <view class="modal-close" bindtap="cancelEdit">Ã—</view>
      </view>
      <view class="modal-body">
        <view class="form-group">
          <view class="form-label">è¯¾ç¨‹åç§°</view>
          <input class="form-input" value="{{editForm.name}}" bindinput="onEditFormChange" data-field="name" placeholder="è¯·è¾“å…¥è¯¾ç¨‹åç§°" />
        </view>
        <view class="form-row">
          <view class="form-group half">
            <view class="form-label">å­¦ç§‘</view>
            <input class="form-input" value="{{editForm.subject}}" bindinput="onEditFormChange" data-field="subject" placeholder="è¯·è¾“å…¥å­¦ç§‘" />
          </view>
          <view class="form-group half">
            <view class="form-label">å¹´çº§</view>
            <input class="form-input" value="{{editForm.grade}}" bindinput="onEditFormChange" data-field="grade" placeholder="è¯·è¾“å…¥å¹´çº§" />
          </view>
        </view>
        <view class="form-group">
          <view class="form-label">è¯¾ç¨‹ç±»å‹</view>
          <input class="form-input" value="{{editForm.type}}" bindinput="onEditFormChange" data-field="type" placeholder="è¯·è¾“å…¥è¯¾ç¨‹ç±»å‹" />
        </view>
        <view class="form-group">
          <view class="form-label">è¯¾ç¨‹æè¿°</view>
          <textarea class="form-textarea" value="{{editForm.description}}" bindinput="onEditFormChange" data-field="description" placeholder="è¯·è¾“å…¥è¯¾ç¨‹æè¿°" />
        </view>
        <view class="form-row">
          <view class="form-group half">
            <view class="form-label">å¼€å§‹æ—¥æœŸ</view>
            <input class="form-input" value="{{editForm.startDate}}" bindinput="onEditFormChange" data-field="startDate" placeholder="è¯·è¾“å…¥å¼€å§‹æ—¥æœŸ" />
          </view>
          <view class="form-group half">
            <view class="form-label">ç»“æŸæ—¥æœŸ</view>
            <input class="form-input" value="{{editForm.endDate}}" bindinput="onEditFormChange" data-field="endDate" placeholder="è¯·è¾“å…¥ç»“æŸæ—¥æœŸ" />
          </view>
        </view>
        <view class="form-row">
          <view class="form-group half">
            <view class="form-label">å­¦ç”Ÿäººæ•°</view>
            <input class="form-input" type="number" value="{{editForm.studentCount}}" bindinput="onEditFormChange" data-field="studentCount" placeholder="è¯·è¾“å…¥å­¦ç”Ÿäººæ•°" />
          </view>
          <view class="form-group half">
            <view class="form-label">èµ„æ–™æ•°é‡</view>
            <input class="form-input" type="number" value="{{editForm.materialsCount}}" bindinput="onEditFormChange" data-field="materialsCount" placeholder="è¯·è¾“å…¥èµ„æ–™æ•°é‡" />
          </view>
        </view>
        <view class="modal-actions">
          <view class="action-btn secondary-btn" bindtap="cancelEdit">å–æ¶ˆ</view>
          <view class="action-btn primary-btn" bindtap="saveEdit">ä¿å­˜</view>
        </view>
      </view>
    </view>
  </view>
</view>
