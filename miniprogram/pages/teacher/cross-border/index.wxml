<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="top-nav">
    <view class="nav-back" bindtap="navigateBack">
      <text class="back-icon">â†</text>
    </view>
    <view class="nav-title">è·¨å¢ƒé€‚é…</view>
    <view class="nav-actions">
      <view class="action-item" bindtap="addComparison">
        <text class="action-icon">+</text>
      </view>
    </view>
  </view>

  <!-- æœç´¢å’Œç­›é€‰ -->
  <view class="search-filter">
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input class="search-input" placeholder="æœç´¢çŸ¥è¯†ç‚¹ã€å…³é”®è¯" bindinput="onSearch" value="{{searchKeyword}}" />
    </view>
    <view class="filter-section">
      <view class="filter-item" bindtap="showFilter('subject')">
        <text>{{selectedSubject || 'å­¦ç§‘'}}</text>
        <text class="filter-arrow">â–¼</text>
      </view>
      <view class="filter-item" bindtap="showFilter('grade')">
        <text>{{selectedGrade || 'å¹´çº§'}}</text>
        <text class="filter-arrow">â–¼</text>
      </view>
    </view>
  </view>

  <!-- çŸ¥è¯†ç‚¹å¯¹æ ‡åˆ—è¡¨ -->
  <view class="comparisons-list">
    <view wx:for="{{comparisons}}" wx:key="id" class="comparison-item">
      <view class="comparison-header">
        <view class="comparison-title">{{item.name}}</view>
        <view class="comparison-badge" style="background-color: {{item.status === 'completed' ? '#D9F99D' : '#FEF3C7'}}">
          {{item.status === 'completed' ? 'å·²å®Œæˆ' : 'è¿›è¡Œä¸­'}}
        </view>
      </view>
      <view class="comparison-details">
        <view class="detail-row">
          <text class="detail-label">å­¦ç§‘:</text>
          <text class="detail-value">{{item.subject}}</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">å¹´çº§:</text>
          <text class="detail-value">{{item.grade}}å¹´çº§</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">çŸ¥è¯†ç‚¹æ•°é‡:</text>
          <text class="detail-value">{{item.knowledgePoints.length}}ä¸ª</text>
        </view>
        <view class="detail-row">
          <text class="detail-label">åˆ›å»ºæ—¶é—´:</text>
          <text class="detail-value">{{item.createDate}}</text>
        </view>
      </view>
      <view class="comparison-content">
        <view class="knowledge-points-preview">
          <view wx:for="{{item.knowledgePoints.slice(0, 3)}}" wx:key="index" class="knowledge-point-item">
            <view class="point-guangdong">
              <text class="point-region">å¹¿ä¸œ:</text>
              <text class="point-content">{{item.guangdong}}</text>
            </view>
            <view class="point-hongkong">
              <text class="point-region">é¦™æ¸¯:</text>
              <text class="point-content">{{item.hongkong}}</text>
            </view>
          </view>
          <view wx:if="{{item.knowledgePoints.length > 3}}" class="more-points">
            ... è¿˜æœ‰ {{item.knowledgePoints.length - 3}} ä¸ªçŸ¥è¯†ç‚¹
          </view>
        </view>
      </view>
      <view class="comparison-actions">
        <view class="action-btn primary-btn" bindtap="viewComparison" data-id="{{item.id}}">
          <text class="action-text">æŸ¥çœ‹è¯¦æƒ…</text>
        </view>
        <view class="action-btn secondary-btn" bindtap="editComparison" data-id="{{item.id}}">
          <text class="action-text">ç¼–è¾‘</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ— æ•°æ®æç¤º -->
  <view wx:if="{{comparisons.length === 0}}" class="empty-state">
    <text class="empty-icon">ğŸŒ‰</text>
    <view class="empty-text">æš‚æ— å¯¹æ ‡æ•°æ®</view>
    <view class="empty-desc">ç‚¹å‡»å³ä¸Šè§’æ·»åŠ çŸ¥è¯†ç‚¹å¯¹æ ‡</view>
  </view>

  <!-- ç­›é€‰å¼¹çª— -->
  <view wx:if="{{showFilterModal}}" class="modal" catchtap="hideFilter">
    <view class="modal-content" catchtap="catchTap">
      <view class="modal-header">
        <view class="modal-title">{{filterTitle}}</view>
        <view class="modal-close" bindtap="hideFilter">Ã—</view>
      </view>
      <view class="modal-body">
        <view wx:for="{{filterOptions}}" wx:key="index" class="filter-option" bindtap="selectFilter" data-value="{{item.value}}" data-label="{{item.label}}">
          <text class="option-text">{{item.label}}</text>
          <text wx:if="{{item.value === selectedFilterValue}}" class="option-check">âœ“</text>
        </view>
      </view>
    </view>
  </view>
</view>